golden_ratio = 1.6180339887498948482
page_width = 960px
min_page_width = 200px
header_height = 60px
avatar_size = 40px
carousel_width = 500px
carousel_height = carousel_width / golden_ratio

link_color = #e5aa3d
link_hover_color = #428bca
text_color = #344
medium_text_color = #666
light_text_color = #888
highlight_color = #fdaa4d
border_color = #ddd

header_color = #ededed
header_border_color = border_color
secondary_header_color = #fafafa
secondary_header_border_color = #f1f1f1

table_header_color = #fff
table_odd_color = secondary_header_color
table_even_color = header_color
table_hover_color = #d8d8d8

thing_width = 300px
thing_height = ((thing_width) / 1.618)


// Links
a, a:visited
  color link_color
  text-decoration none
  cursor pointer

a:hover, a:focus
  text-decoration underline
  outline 0

a:hover
  color link_hover_color !important

a.fa, a.fa:visited
  color light_text_color

  &:hover
    text-decoration none


// Special text
.error
  color red

.warn
  color #fff000

.success
  color green

.weak
  font-weight normal
  color light_text_color

.help
  color medium_text_color

// Buttons
button
  border 1px solid border_color
  border-radius 3px
  background-color #eee
  background-image linear-gradient(#fcfcfc, #eee)
  padding 4px
  color link_color
  cursor pointer

  &::-moz-focus-inner
    border none

  &:hover
    color link_hover_color

  &.success
    background #5cb85c
    border-color #4cae4c
    color #fff

    &:hover
      background #449d44
      border-color #398439

  &:disabled, &:hover:disabled
    background-color header_color
    color light_text_color !important
    border-color border_color


// Inputs
.CodeMirror-focused, .tag-editor-focused, input:focus, textarea:focus,
  select:focus
  border 1px solid rgba(82, 168, 236, 0.8)
  box-shadow 0 0 8px rgba(82, 168, 236, 0.6)
  outline thin dotted \9


// Clear
.clear
  height 1px
  margin-bottom -1px
  clear both


// hr
hr
  border none
  border-bottom 1px solid border_color
  height 1px


// Code
code
  background-color rgba(200, 200, 200, 0.3)
  font-size 110%
  padding 2px
  border-radius 3px
  overflow-x auto
  white-space nowrap

pre code
  padding 0.5em 1em
  border-left 5px solid #bbb
  display block


// Headings
h1, h2, h3, h4
  color medium_text_color
  margin-top 0.5em
  margin-bottom 0.25em

h1
  font-size 22pt
  font-weight normal


// em
em
  color medium_text_color


// Body
body
  background-image url(/images/grid.png)
  margin 0
  font-family 'Roboto Slab', serif
  overflow-y scroll


// Layout
#page
  #header-content
    min-width min_page_width
    max-width page_width
    min-height header_height
    margin 0 auto
    overflow hidden

  #content
    margin auto
    min-width min_page_width
    max-width page_width
    margin-bottom 4em

  #footer
    position fixed
    bottom 0
    width 100%
    z-index 5

  #footer-content
    min-height 1.5em
    min-width min_page_width
    max-width page_width
    margin auto


// Header
#header
  border-bottom 1px solid header_border_color
  background-color header_color

  a
    text-decoration none
    color #666

  .logo
    height header_height - 10px
    margin 5px 20px 0 5px
    vertical-align top
    display inline-block
    float left

  #main-header-nav, #context-header-nav
    list-style none
    padding 0
    margin 0
    white-space nowrap

    > li
      display inline-block

  #main-header-nav
    float left

    a.header-nav
      text-transform uppercase
      font-size 18pt
      line-height header_height - 20px

  #context-header-nav
    float right

  a.header-nav
    line-height header_height - 20px
    height header_height - 20px
    padding 10px
    display inline-block
    transition 0.25s
    font-size 12pt

    &:hover
      color #f0ac48
      background-color #f7f9f7

  a.user
    max-width 150px
    height header_height - 12px
    padding 6px
    font-size 10pt
    line-height 24px
    text-align center
    vertical-align middle
    margin-top -11px

    .avatar
      display inline-block
      margin-right 0.5em

    .user-info
      display inline-block
      text-align center

    .points .fa
      color #f0ac48
      margin-right 5px

  a.sign-out
    font-size 18pt

    .text
      display none


// Footer
#footer
  background-color #e1e1e1
  border-top 1px solid #878787

  .copyright
    margin-right 10px

  .footer-nav
    margin 0 6px


// Login
.login-page
  ul
    list-style none
    padding 0
    margin 0

    li
      font-size 20pt
      margin 1em

      .fa
        font-size 24pt
        width 1.5em
        color #fff
        border-radius 20px
        height 40px
        width 40px
        line-height 42px
        text-align center
        margin-right 0.25em


      &.google a
        color #cc3d2d
        .fa
          background-color #cc3d2d

      &.facebook a
        color #2b3990
        .fa
          background-color #2b3990

      &.twitter a
        color #27aae1
        .fa
          background-color #27aae1

      &.github a
        color #1c75bc
        .fa
          background-color #1c75bc


// Register
.register-page
  p
    margin 1em 0

  .fa
    margin 0 0.5em

  .suggestion
    margin 0.5em


// Home
.home-page
  text-align center


// Create
.create-page
  .fa
    margin-right 0.5em

  th
    text-align left

  td > span
    margin 0 0.5em

  input[name=name]
    width 20em

  input[name=title]
    width 25em


// Panels
.panel
  border 1px solid border_color
  border-radius 3px
  display inline-block
  margin 1em
  background-color white
  text-align center
  width 15em
  vertical-align top

  .panel-heading
    background-color header_color
    border-bottom 1px solid border_color
    padding 0.25em 1em
    font-size 140%
    padding 0
    margin 0

  .panel-body
    padding 0.25em 1em

// Avatar
.avatar
  border-radius 3px
  width avatar_size
  height avatar_size
  margin 4px 4px 0 0


// Stars
.stars
  position relative

  .modal
    white-space nowrap

  > a
    color medium_text_color

    .user-starred
      color highlight_color

    &:hover
      text-decoration none

      .user-starred
        color link_hover_color


// Things
.things
  list-style none
  padding 0

  .thing-preview
    position relative
    display inline-block
    margin 0 8px 1em 8px
    width thing_width
    overflow hidden
    cursor pointer
    font-family "Times New Roman", Times, serif
    font-size 18pt

    .image
      width thing_width - 2px
      height thing_height
      border-radius 6px
      border 1px solid #ddd

      &.missing
        background-color #eee
        text-align center

        .fa
          font-size 64pt
          line-height thing_height

    a:hover
      .image
        border 1px solid border_color

    .info
      margin 0 0.2em

    .owner
      white-space nowrap
      color text_color

      span
        color link_color

    .title, .owner, .stars, .comments
      display block
      white-space nowrap

    .stars, .comments
      font-size 12pt
      margin 0 0.1em 0 0.5em
      color light_text_color

      &:hover
        color text_color

    .fa
      font-size 11pt

    .owner
      font-size 12pt
      float left

    .stars
      float right

    .comments
      float right

    .title
      margin 0 0.2em
      clear both
      color text_color


// Thing & Profile common
#page #content
  &.thing-page, &.profile-page
    max-width 100%

.thing, .profile
  .header-content, .page-content
    max-width page_width
    margin auto

  .header
    font-size 18pt
    margin 0 0 0.25em 0
    padding 0.5em 0
    background-color secondary_header_color
    border-bottom 1px solid secondary_header_border_color
    color medium_text_color

    .widgets
      float right

    .path .fa
      width 1.25em
      margin-right 0.5em

  .menu
    background-color #f3f3f3
    border 1px solid border_color
    border-top-left-radius 3px
    border-top-right-radius 3px
    margin 1em 0 2em 0
    padding 0.5em 0.25em 0 0.25em

    a
      display inline-block
      text-transform capitalize
      font-size 16pt
      background-color #fff
      border-top-left-radius 3px
      border-top-right-radius 3px
      border 1px solid border_color
      padding 0.125em 0.25em
      margin-left 0.25em
      margin-bottom -1px

      &.active
        border-bottom 1px solid #fff
        color medium_text_color !important

      &:active, &:visited, &:hover, &:focus
        text-decoration none

  .page-content > button
    float right
    margin 0.5em

  .section > .carousel
    float left
    margin-right 1em

  .section > .info
    float right
    max-width 24em
    padding 0.5em
    border 1px solid border_color
    border-radius 3px
    background-color #fff

    th, td
      padding 0.25em

    th
      text-align right
      color medium_text_color
      white-space nowrap
      vertical-align top

    select
      width 18.75em

    input, .tag-editor
      width 18em

  .markdown
    padding 0 1em
    background #fff
    border 1px solid border_color
    border-radius 3px


// Profiles
.profiles > a
  display inline-block
  margin 0 0.5em 0.5em 0
  text-align center

  .avatar
    width avatar_size * golden_ratio
    height avatar_size * golden_ratio
    display block
    margin auto
    vertical-align middle

.profiles-small > .profiles > a
  margin 0 0.25em 0.25em 0

  .avatar
    width avatar_size
    height avatar_size

  .name
    display none


// Profile
.profile
  .picture
    max-width 200px
    max-height 200px
    border-radius 3px
    margin-right 1em
    margin-bottom 1em
    float left

  .bio
    clear both


// Comments
.comment
  margin 2em 0

  .avatar
    position absolute

  .comment-wrapper
    border-radius 3px
    border 1px solid border_color
    margin-left avatar_size + 15px
    position relative

    &:before, &:after
      width 0
      height 0
      content ' '
      display block
      border-color transparent
      border-style solid solid outset
      position absolute
      top 12px
      left -16px

    &:before
      border-right-color border_color
      border-width 8px

    &:after
      border-right-color header_color
      border-width 8px
      margin-left 1px

  .comment-header
    border-top-left-radius 3px
    border-top-right-radius 3px
    border-bottom 1px solid border_color
    padding 0.5em
    background header_color
    color light_text_color
    font-size 80%
    height 2.5em
    line-height 2.5em

    > a
      color text_color
      font-weight bold

    .actions
      float right
      white-space nowrap

      .fa
        margin-left 0.5em
        font-size 12pt

  .comment-content
    max-height 60em

    .markdown
      padding 0.5em
      border none

    .markdown-editor
      border none


// Tags
.tags
  line-height 2em

  .tag
    border-radius 3px
    background-color link_color
    margin 0 0.25em 0.25em 0
    padding 0.125em 0.25em

    &:hover
      background-color link_hover_color

    a
      color #000

      &:hover
        text-decoration none
        color #000 !important


// Tag Editor
.tag-editor
  display inline-block
  border 1px inset border_color
  border-radius 3px

  .tag-editor-wrapper
    overflow hidden

  &.tag-editor-focused
    border 1px solid rgba(82, 168, 236, 0.8)

  .tag-editor-tag
    border-radius 3px
    background link_color
    margin 4px
    padding 2px 4px
    display inline-block

  .tag-editor-text
    font-size 14px
    display inline-block

  .tag-editor-delete
    color medium_text_color
    font-weight bold
    text-decoration none
    cursor pointer
    margin-left 6px
    display inline-block

  .tag-editor-input
    font-size 14px
    padding 2px 4px
    border none
    outline none
    width 100%

    &:focus
      box-shadow none

  .tag-editor-measure
    position absolute
    left -999px


// Markdown
input, textarea, select
  border 1px inset border_color
  border-radius 3px
  padding 4px
  background-color #fff

.markdown-editor
  border-radius 3px
  background #fff
  border 1px solid border_color

  .markdown-menu
    background-color #f3f3f3
    border-bottom 1px solid border_color
    border-top-left-radius 3px
    border-top-right-radius 3px
    padding 0.25em 0.25em 0 0.25em

    a
      display inline-block
      background-color #fff
      margin-bottom -1px
      border-top-left-radius 3px
      border-top-right-radius 3px
      border 1px solid border_color
      padding 0.25em
      margin-left 0.25em

      &.active
        border-bottom 1px solid #fff

      &:hover
        text-decoration none

  .markdown-toolbar
    .button-group
      display inline-block
      margin 0.25em 1em 0.25em 0.25em

      a
        display inline-block
        border 1px solid border_color
        padding 0.125em 0.25em
        border-right none
        background-color #eee
        background-image linear-gradient(#fcfcfc, #eee)

        &:hover
          text-decoration none

        &:first-of-type
          border-top-left-radius 3px
          border-bottom-left-radius 3px

        &:last-of-type
          border-top-right-radius 3px
          border-bottom-right-radius 3px
          border-right 1px solid border_color

  .markdown-help
    border-top 1px solid border_color
    overflow auto
    font-size 90%

    .markdown-help-menu, .markdown-help-submenu
      float left
      height 13em
      width 12em
      transition 0.5s

      a
        display block
        padding 0.25em 0.5em
        margin 0
        border-top 1px solid transparent
        border-bottom 1px solid transparent
        transition 0.5s

        &:first-of-type
          margin-top 0.75em

        &:hover
          text-decoration none
          box-shadow 0 1px 2px #f0f0f0
          background-color #fff

        &.active, &.active:hover
          box-shadow 0 1px 2px #f0f0f0
          background-color #fff
          color text_color !important
          border-top 1px solid border_color
          border-bottom 1px solid border_color

    .markdown-help-submenu
      background-color #f3f3f3
      margin-right 0.5em
      border-right 1px solid border_color
      border-left 1px solid border_color

    .markdown-help-content
      padding 0.5em
      font-size 95%
      color medium_text_color
      transition 0.5s

      p:first-of-type
        margin-top 0

  .markdown-content
    border-top 1px solid border_color
    padding 0.25em

  .markdown-preview
    padding 0 1em
    overflow auto
    border-bottom-left-radius 3px
    border-bottom-right-radius 3px
    min-height 20em

  .CodeMirror
    border-bottom-left-radius 3px
    border-bottom-right-radius 3px
    border 1px solid #fff

    &.CodeMirror-focused
      border 1px solid rgba(82, 168, 236, 0.8)

  .CodeMirror-empty
    color light_text_color
    font-size 100%


// Progressbar
.progressbar
  background-color #f5f5f5
  border-radius 3px
  box-shadow 0 1px 2px rgba(0, 0, 0, 0.1) inset
  text-align center
  overflow hidden

  > div
    background-color link_hover_color
    height 2em
    line-height 2em


// Modal
.modal
  position absolute
  right -10px
  background #fff
  border-radius 3px
  border 1px solid border_color
  z-index 110

  .modal-header, .modal-content, .modal-footer
    padding 0.25em 0.5em

  .modal-header
    font-weight bold
    background-color secondary_header_color
    border-bottom 1px solid border_color
    border-top-left-radius 3px
    border-top-right-radius 3px

  .modal-footer
    text-align right

    button
      margin-left 0.5em
      text-transform capitalize

.modal-overlay
  z-index 100
  position fixed
  top 0
  left 0
  width 100%
  height 100%
  background-color rgba(0, 0, 0, 0.1)


// Callouts
.callout-top-right
  &:before, &:after
    width 0
    height 0
    content ' '
    display block
    border-color transparent
    border-style solid solid solid
    position absolute
    right 12px
    top -15px

  &:before
    border-bottom-color border_color
    border-width 8px

  &:after
    border-bottom-color secondary_header_color
    border-width 8px
    margin-top 1px


// File manager
.file-manager
  border 1px solid border_color
  border-radius 3px
  background-color #fff

  .file-manager-footer
    padding 1em
    border-top 1px solid border_color

  .preview img
    width 32px
    height 32px
    border-radius 3px
    vertical-align middle

  .progress-bar
    color text_color

  .bb-modal .body
    text-align right

  td, th
    text-align center
    white-space nowrap
    font-size 10pt
    border-right 1px solid border_color
    padding 0.25em 0.5em

    &:last-child
      border-right none

  th
    border-bottom 1px solid border_color
    padding 0.5em

  td.preview .fa
    font-size 16pt
    color light_text_color

  th.name, td.name
    width 100%
    text-align left

    a
      color text_color

  th.size, td.size, th.downloads, td.downloads
    min-width 6em
    text-align right

  td.actions
    .delete
      position relative
      display inline-block

    a
      color light_text_color
      margin 0.5em


// Table
.table
  border-collapse collapse

  th
    .fa-caret-up, .fa-caret-down
      display none

    .fa
      width 1em

  th.st-sort-ascent, th.st-sort-descent
    .fa-caret-right
      display none

  th.st-sort-ascent .fa-caret-up
    display inline-block

  th.st-sort-descent .fa-caret-down
    display inline-block

.table-striped > thead
  > tr:first-child > th
    background-color table_header_color

.table-striped > tbody
  > tr:nth-child(odd) > td
    background-color table_odd_color

  > tr:nth-child(even) > td
    background-color table_even_color

  > tr:hover > td
    background-color table_hover_color

.modal-active .table-striped > tbody
  > tr:nth-child(odd):hover > td
    background-color table_odd_color

  > tr:nth-child(even):hover > td
    background-color table_even_color


// Carousel
.carousel
  text-align center
  width carousel_width
  height carousel_height
  position relative

  .expand
    position absolute
    right -0.75em
    z-index 10
    margin-right 1em
    font-size 24pt
    color medium_text_color
    opacity 0.75

    &:hover
      opacity 1

      .fa
        color medium_text_color
  .slick-list
    border-radius 3px
    border 1px solid border_color
    background-color header_color
    background-image url('/images/spinner.gif')
    background-repeat no-repeat
    background-position center

  &.changing .slick-list
    background-image none

  img
    width carousel_width
    height carousel_height
    display inline-block
    background-color #fff
    vertical-align middle

  .slick-prev, .slick-next
    width 40px
    height 40px

    &:before
      color medium_text_color
      font-size 24pt
      line-height 40px

  .carousel-empty
    height carousel_height
    line-height carousel_height
    font-size 150%
    background header_color

  &.fullscreen
    position: fixed
    top 0
    left 0
    width 100%
    height 100%

    .slick-list
      background-image url('/images/spinner-black.gif')

    &.changing .slick-list
      background-image none

    .slick-list
      background-color #000
      height 100%

    .slick-prev
      left 10px

    .slick-next
      right 10px

    .slick-track
      height 100%
      line-height 100%

    .carousel-media
      img
        height 80%
        width initial
        max-width 80%
        margin 4%


// Sign in
#page #header a.header-nav
  &.user, &.sign-out
    display none

.authorized #page #header a.header-nav
  &.sign-in
    display none !important

  &.user, &.sign-out
    display inline-block !important


// Responsive
@media (max-width 730px)
  #page #header #context-header-nav
    a.header-nav
      float none
      width 100%

@media (max-width 400px)
  #page #header
    #main-header-nav, #context-header-nav
      float none
      display block
      clear both
      width 100%

      a.header-nav
        font-size 14pt

      a.user
        font-size 10pt

    #context-header-nav
      li
        display block

      a.header-nav
        float none
        width 100%

      .avatar
        margin-left 5px

      .sign-out .text
        display inline
